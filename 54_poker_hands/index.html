<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns:fb="http://www.facebook.com/2008/fbml" xmlns:og="http://opengraph.org/schema/">
    <head>
        <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1" />
        <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
        <meta name="viewport" content="width=device-width">
        <link rel="stylesheet" href="chosen/chosen.min.css"/>
        <title>Poker Hands by Kai Kao��</title>
        <style>
        .btn {
          background: #399cde;
          background-image: -webkit-linear-gradient(top, #399cde, #2980b9);
          background-image: -moz-linear-gradient(top, #399cde, #2980b9);
          background-image: -ms-linear-gradient(top, #399cde, #2980b9);
          background-image: -o-linear-gradient(top, #399cde, #2980b9);
          background-image: linear-gradient(to bottom, #399cde, #2980b9);
          -webkit-border-radius: 10;
          -moz-border-radius: 10;
          border-radius: 10px;
          font-family: Arial;
          color: #ffffff;
          font-size: 12px;
          padding: 5px 10px 5px 10px;
          text-decoration: none;
        }

        .btn:hover {
          background: #3cb0fd;
          background-image: -webkit-linear-gradient(top, #3cb0fd, #3498db);
          background-image: -moz-linear-gradient(top, #3cb0fd, #3498db);
          background-image: -ms-linear-gradient(top, #3cb0fd, #3498db);
          background-image: -o-linear-gradient(top, #3cb0fd, #3498db);
          background-image: linear-gradient(to bottom, #3cb0fd, #3498db);
          text-decoration: none;
        }
        </style>
    </head>
    <body style="-webkit-text-size-adjust: 100%;-ms-text-size-adjust: 100%;margin: 0;padding: 0;background: #EEEEEE;height: 100% !important;width: 100% !important;">
        <img alt="" src="" style="-ms-interpolation-mode: bicubic;height: auto;line-height: 100%;outline: none;text-decoration: none;max-width: 100%;border: 0!important;">
        <table border="0" cellpadding="0" cellspacing="0" height="100%" width="100%" id="bodyTable" style="-webkit-text-size-adjust: 100%;-ms-text-size-adjust: 100%;mso-table-lspace: 0pt;mso-table-rspace: 0pt;margin: 0;padding: 0;font-family: Helvetica Neue, Helvetica, Arial, sans-serif;min-height: 100%;background: #eeeeee;color: #444444;border-collapse: collapse !important;height: 100% !important;width: 100% !important;">
            <tr>
                <td align="center" valign="top" style="-webkit-text-size-adjust: 100%;-ms-text-size-adjust: 100%;mso-table-lspace: 0pt;mso-table-rspace: 0pt;">
                    <table align="center" border="0" cellspacing="0" width="600" id="emailContainer" style="-webkit-text-size-adjust: 100%;-ms-text-size-adjust: 100%;mso-table-lspace: 0pt;mso-table-rspace: 0pt;border-collapse: collapse !important;">
                        <tr>
                            <td id="logoWrap" align="bottom" style="text-align: center!important;-webkit-text-size-adjust: 100%;-ms-text-size-adjust: 100%;mso-table-lspace: 0pt;mso-table-rspace: 0pt;">
                                <a href="http://www.mediaalpha.com/" style="-webkit-text-size-adjust: 100%;-ms-text-size-adjust: 100%;text-decoration: none;"><img id="logo" src="http://www.mediaalpha.com/img/logo-h.png" width="224" height="50" style="margin: 10px auto 20px;-ms-interpolation-mode: bicubic;height: auto;line-height: 100%;outline: none;text-decoration: none;max-width: 100%;border: 0!important;"></a>
                            </td>
                        </tr>

                        <tr>
                            <td align="center" valign="top" style="-webkit-text-size-adjust: 100%;-ms-text-size-adjust: 100%;mso-table-lspace: 0pt;mso-table-rspace: 0pt;">
                                <table class="sectionWrap" border="0" cellpadding="0" cellspacing="0" width="600" style="background: #FFFFFF;overflow: hidden;border-radius: 4px;box-shadow: 0px 3px 0px #DDDDDD;max-width: 600px!important;min-width: 600px!important;-webkit-text-size-adjust: 100%;-ms-text-size-adjust: 100%;mso-table-lspace: 0pt;mso-table-rspace: 0pt;text-align: center;border-collapse: collapse !important;" id="content">
                                    <tr>
                                        <td id="header" valign="top" style="padding: 0px 20px 30px 20px;max-width: 100%!important;background: url('http://artsandrhymesdotme.files.wordpress.com/2014/12/snowbg.gif') center center / cover no-repeat;-webkit-text-size-adjust: 100%;-ms-text-size-adjust: 100%;mso-table-lspace: 0pt;mso-table-rspace: 0pt;">
                                            <h1 style="font-family: Helvetica;font-size: 33px;font-style: normal;font-weight: bold;text-align: center;margin: 40px auto 0;"><font style="color:#FFFFFF; text-shadow: -1px 0 black, 0 1px black, 1px 0 black, 0 -1px #C8C8C8;">Thanks For Trying Poker Hands Calculator!</font></h1>
                                            <br>
                                            <img src="http://dcgazette.com/wp-content/uploads/2015/10/WCb3GJG.gif" style="-ms-interpolation-mode: bicubic;height: auto;line-height: 100%;outline: none;text-decoration: none;max-width: 100%!important;width: 600px;border: 0!important;">
                                        </td>
                                    </tr>
                                    <tr>
                                        <td bgcolor="#FFFFFF" style="-webkit-text-size-adjust: 100%;-ms-text-size-adjust: 100%;mso-table-lspace: 0pt;mso-table-rspace: 0pt;">
                                            <p style="margin: 40px 30px 20px;text-align: center;-webkit-text-size-adjust: 100%;-ms-text-size-adjust: 100%;font-size: 24px;line-height: 38px;"><font color="#4d4d4d">
                                                Poker Hands Calculator by <b>Kai Kao</b>
                                                </font>
                                            </p>
                                            <span>
                                                Points: A, 2, 3, 4, 5, 6, 7, 8, 9, T, J, Q, K
                                                <br/>
                                                Suits: S, H, C, D
                                            </span>
                                            <table id="hands-table" class="button main" border="0" cellpadding="14" cellspacing="0" style="" align="center">
                                                <tr>
                                                    <td align="center" valign="middle"  >
                                                        <p>
                                                            How many players?
                                                        </p>
                                                        <select id="players-select" style="width: 100px;">
                                                            <option value="2">2</option>
                                                            <option value="3">3</option>
                                                            <option value="4">4</option>
                                                            <option value="5">5</option>
                                                            <option value="6">6</option>
                                                            <option value="7">7</option>
                                                            <option value="8">8</option>
                                                        </select>
                                                    </td>
                                                </tr>
                                                <tr>
                                                    <td align="center" valign="middle"  >
                                                        <input id="comapre-suit" type="checkbox" style="margin-right: 10px;"/>compare card suits if tie.
                                                    </td>
                                                </tr>

                                                <tr id="hands-input-tmp" style="display: none;">
                                                    <td align="center" valign="middle" >
                                                        <span style="padding:10px; font-size:24px; text-align:center; color:#999999; text-shadow:0px 0px 0px rgba(42,42,42,.76); font-weight:bold; font-family:sans-serif;">Player 2: </span>
                                                        <input type="text" placeholder="i.e. AH 2H 3C 4S 5D" style="width: 300px; border-color:#cccccc; padding:10px; font-size:24px; text-align:center; border-width:2px; border-radius:8px; background-color:#ffffff; color:#21B0DD; box-shadow: 0px 0px 5px 0px rgba(42,42,42,.75); border-style:solid; text-shadow:0px 0px 0px rgba(42,42,42,.76); font-weight:bold; font-family:sans-serif;">
                                                        <button class="btn generate-hand">Auto-Generate</button>
                                                    </td>
                                                </tr>

                                            </table>
                                            <table class="button main" border="0" cellpadding="14" cellspacing="0" style="display: inline-block;margin: 10px auto 0;border-radius: 6px;font-weight: bold;font-size: 24px;text-align: center;cursor: pointer;color: #FFFFFF;background: #61BD4F;box-shadow: 0px 4px 0px #49852E;-webkit-text-size-adjust: 100%;-ms-text-size-adjust: 100%;mso-table-lspace: 0pt;mso-table-rspace: 0pt;border-collapse: collapse !important;" align="center">
                                                <tr>
                                                    <td align="center" valign="middle" class="emailButtonContent" style="-webkit-text-size-adjust: 100%;-ms-text-size-adjust: 100%;mso-table-lspace: 0pt;mso-table-rspace: 0pt;">
                                                        <a id='calculate' href="#" target="_blank" style="text-decoration: none;padding: 10px;-webkit-text-size-adjust: 100%;-ms-text-size-adjust: 100%;"><font color="white">Who is Winner?</font></a>
                                                    </td>
                                                </tr>
                                            </table>
                                            <table id='answer-table' class="button main" border="0" cellpadding="14" cellspacing="0" style="display: none; margin: 10px auto 0;border-radius: 6px;font-weight: bold;font-size: 24px;text-align: center;color: #61BD4F;-webkit-text-size-adjust: 100%;-ms-text-size-adjust: 100%;mso-table-lspace: 0pt;mso-table-rspace: 0pt;border-collapse: collapse !important;" align="center">
                                                <tr>
                                                    <td align="center" valign="middle" style="-webkit-text-size-adjust: 100%;-ms-text-size-adjust: 100%;mso-table-lspace: 0pt;mso-table-rspace: 0pt;">
                                                        <font id="answer" color="#61BD4F">Player 1 Win!</font>
                                                        <br/>
                                                        <font id='took-time-font' color="#929292" style="font-size: 16px;">took time: <span id="took-time">0</span> sec</font>
                                                    </td>
                                                </tr>
                                            </table>
                                            <table border="0" cellpadding="20" style="-webkit-text-size-adjust: 100%;-ms-text-size-adjust: 100%;mso-table-lspace: 0pt;mso-table-rspace: 0pt;border-collapse: collapse !important;">
                                                <tr>
                                                    <td style="-webkit-text-size-adjust: 100%;-ms-text-size-adjust: 100%;mso-table-lspace: 0pt;mso-table-rspace: 0pt;">&nbsp;</td>
                                                </tr>
                                            </table>
                                        </td>
                                    </tr>
                                </table>
                            </td>
                        </tr>

                        <tr>
                            <td style="-webkit-text-size-adjust: 100%;-ms-text-size-adjust: 100%;mso-table-lspace: 0pt;mso-table-rspace: 0pt;">
                                <p style="margin: 20px auto 0;text-align: center;color: #aaaaaa;font-weight: bold;-webkit-text-size-adjust: 100%;-ms-text-size-adjust: 100%;font-size: 24px;line-height: 38px;">Connect with me:</p>
                            </td>
                        </tr>
                        <tr>
                            <td id="socialLinks" style="text-align: center!important;-webkit-text-size-adjust: 100%;-ms-text-size-adjust: 100%;mso-table-lspace: 0pt;mso-table-rspace: 0pt;">
                                <a href="https://www.facebook.com/handsomekai" style="-webkit-text-size-adjust: 100%;-ms-text-size-adjust: 100%;text-decoration: none;width: 40px;"><img src="https://gallery.mailchimp.com/5cb712992a906406c5eae28a7/images/e1edb4e7-5b33-4c3d-a010-e15b628929af.png" width="40" height="40" style="-ms-interpolation-mode: bicubic;height: auto;line-height: 100%;outline: none;text-decoration: none;max-width: 100%;margin: 10px 2px;border: 0!important;"></a>
                                <a href="https://twitter.com/mrkaikao" style="-webkit-text-size-adjust: 100%;-ms-text-size-adjust: 100%;text-decoration: none;width: 40px;"><img src="https://gallery.mailchimp.com/5cb712992a906406c5eae28a7/images/24847ca6-6a1d-4069-88b5-80e353cebbac.png" width="40" height="40" style="-ms-interpolation-mode: bicubic;height: auto;line-height: 100%;outline: none;text-decoration: none;max-width: 100%;margin: 10px 2px;border: 0!important;"></a>
                                <a href="https://tw.linkedin.com/in/kaikao" style="-webkit-text-size-adjust: 100%;-ms-text-size-adjust: 100%;text-decoration: none;width: 40px;"><img src="https://gallery.mailchimp.com/5cb712992a906406c5eae28a7/images/ab734e10-e4d9-4829-99c7-421e4daa175f.png" width="40" height="40" style="-ms-interpolation-mode: bicubic;height: auto;line-height: 100%;outline: none;text-decoration: none;max-width: 100%;margin: 10px 2px;border: 0!important;"></a>
                                <a href="mailto:handsomekai0530@gmail.com" style="-webkit-text-size-adjust: 100%;-ms-text-size-adjust: 100%;text-decoration: none;width: 40px;"><img src="https://drive.google.com/uc?export=view&id=0B570pTouP05OT05TcGFOOWF1ZDA" width="40" height="40" style="-ms-interpolation-mode: bicubic;height: auto;line-height: 100%;outline: none;text-decoration: none;max-width: 100%;margin: 10px 2px;border: 0!important;"></a>
                            </td>
                        </tr>
                        <tr>
                            <td align="center" valign="top" style="-webkit-text-size-adjust: 100%;-ms-text-size-adjust: 100%;mso-table-lspace: 0pt;mso-table-rspace: 0pt;">
                                <table border="0" align="center" cellpadding="10" cellspacing="0" width="600" id="emailFooter" style="-webkit-text-size-adjust: 100%;-ms-text-size-adjust: 100%;mso-table-lspace: 0pt;mso-table-rspace: 0pt;border-collapse: collapse !important;max-width: 100%!important;">
                                    <tr>
                                        <td valign="top" class="footerContent" style="-webkit-text-size-adjust: 100%;-ms-text-size-adjust: 100%;mso-table-lspace: 0pt;mso-table-rspace: 0pt;">
                                        </td>
                                    </tr>
                                </table>
                            </td>
                        </tr>
                    </table>
                </td>
            </tr>
        </table>
        </td></tr></table>

        <script src="http://code.jquery.com/jquery-1.11.3.min.js" type='text/javascript'></script>
        <script src="chosen/chosen.jquery.min.js" type='text/javascript'></script>

        <script type="text/javascript">

            function initChosen() {
                $('#players-select').chosen({
                    disable_search_threshold: 10
                });
            }

            function generateHandsInput(n) {
                // remove all of clone input first
                $('#hands-table').find('.clone').remove();

                for (i=1; i<=n; i++) {
                    // clone the template
                    var tmp = $('#hands-input-tmp').clone();

                    // remove id
                    tmp.removeAttr('id').addClass('clone');

                    // change player number
                    tmp.find('span').text('Player ' + i + ':');

                    // add attributs for input
                    tmp.find('input').addClass('hands-input').attr('name', 'hands[]');

                    $('#hands-table').append(tmp);

                    tmp.fadeIn();
                }
            }

            function getRandomKey(array) {
                var index = Math.floor(Math.random()*array.length);
                if (typeof array[index] === 'undefined') {
                    return getRandomKey(array);
                }
                return index;
            }

            function generateRandomCards() {
                var points = ['A', '2', '3', '4', '5', '6', '7', '8', '9', 'T', 'J', "Q", 'K'];
                var suits = ['S', 'H', 'C', 'D'];
                var cards = [];
                points.forEach(function(point) {
                    suits.forEach(function(suit) {
                        cards.push(point+suit);
                    });
                });

                var cardsStr = '';
                for (i=0; i<5; i++) {
                    // get index randomly
                    var index = getRandomKey(cards);

                    // combine string
                    cardsStr += cards[index];
                    if (i < 4) {
                        cardsStr += ' ';
                    }

                    // remove card which has been taken
                    cards.splice(index, 1);
                }
                return cardsStr;
            }

            $(document).ready(function() {
                // init chosen plugin
                initChosen();

                // gernerate hands inputs
                generateHandsInput(2);
                $('#players-select').change(function() {
                    var n = $('#players-select').val();
                    generateHandsInput(n);
                });

                // automatically generate hands randomly
                $('#hands-table').on('click', 'button.generate-hand', function() {
                    var cardsStr = generateRandomCards();
                    $(this).prev('input').val(cardsStr);
                });

                $('#calculate').click(function(e) {
                    e.preventDefault();

                    // gat hands
                    var handsInput = $('input.hands-input');
                    var hands = [];
                    $.each(handsInput, function(i, v) {
                        var handStr = $(v).val();
                        hands.push(handStr);
                    });

                    // get is_compare_suit
                    var isCompoareSuit = $('#comapre-suit').is(':checked');
                    if (isCompoareSuit == true) {
                        isCompoareSuit = 1;
                    } else {
                        isCompoareSuit = 0;
                    }

                    var params = {
                        'hands': hands,
                        'is_compare_suit': isCompoareSuit,
                    };

                    $.get("./index.php", params, function(data) {
                        var msg = data.msg;
                        var tookTime = data.took_time;

                        $('#answer').attr('color', '#61BD4F');
                        $('#answer-table').hide();
                        $('#took-time-font').hide();
                        $('#answer').text(msg);
                        $('#answer-table').fadeIn(function() {
                            $('#took-time').text(tookTime);
                            $('#took-time-font').slideDown();
                        });

                    }, 'json').fail(function(failedInfo) {
                        $('#answer').attr('color', '#F22424');
                        $('#answer-table').hide();
                        $('#took-time-font').hide();
                        $('#answer-table').fadeIn();
                        $('#answer').text('Invalid cards, At least 5 cards for each hands.');
                    });
                });
            });
        </script>
    </body>
</html>
